import{a as i,u as d,r as f,b as o,R as m,j as a,p as x,P as p}from"./index-2szCgSKU.js";const h=i([]),u=()=>{const[e,s]=d(h);return{logs:e,setLogs:s}};var g=f();const N="https://news-go.onrender.com/ws",w=()=>{const{lastMessage:e,sendMessage:s,readyState:r}=g.useWebSocket(N),{logs:c,setLogs:n}=u();return o.useEffect(()=>{if(!e)return;const t=JSON.parse(e?.data);console.log(e),t.forEach(l=>n([...c,l]))},[e]),o.useEffect(()=>{console.log("t"),s(JSON.stringify({name:"log",body:""}))},[]),{readyState:r}},R=({log:e})=>{const s=m.createRef();o.useEffect(()=>{s.current&&s.current.scrollIntoView({behavior:"smooth"})},[s]);const r=o.useCallback(()=>{switch(e.level){case"INFO":return"blue";case"WARNING":return"gold";case"ERROR":return"red";case"SUCCESS":return"green";default:return"white"}},[e]),c=o.useCallback(()=>{switch(e.level){case"INFO":return"blue";case"WARNING":return"gold";case"ERROR":return"red";case"SUCCESS":return"green";default:return"white"}},[e]);if(!e.msg)return;const n=[{text:e.time,color:"gray"},{text:"["+e.prefix,color:r()},{text:e.level+"]",color:r(),className:"font-bold"},...e.msg.split(/\s+/).map(t=>({text:t,color:"white",className:"text-white"})),{text:`(${e.file}:${e.line})`,color:"gray",className:"italic"},{text:e.func,color:"gray",className:"italic"}];return a.jsx("div",{ref:s,className:"flex flex-wrap gap-1 p-1 text-sm font-mono",style:{borderLeft:`2px solid ${c()}`},children:n.map((t,l)=>a.jsx(x,{color:t.color,className:`${t.className??""} whitespace-nowrap`,children:t.text},l))})},E=()=>{const{logs:e}=u();return w(),a.jsx(p,{returnChildren:!0,children:a.jsx("div",{className:"rounded-lg space-y-3 shadow-md p-4 h-[600px] max-h-[600px] overflow-auto",children:e.map((s,r)=>a.jsx(R,{log:s},r))})})};export{E as default};
