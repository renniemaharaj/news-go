import{a as i,u as m,r as d,b as a,R as x,j as o,p as f,P as p}from"./index-COf7zTkR.js";const g=i([]),l=()=>{const[e,s]=m(g);return{logs:e,setLogs:s}};var h=d();const w="https://news-go.onrender.com/ws",N=()=>{const{lastMessage:e,sendMessage:s,readyState:r}=h.useWebSocket(w),{logs:c,setLogs:t}=l();return a.useEffect(()=>{if(!e)return;const n=JSON.parse(e?.data);console.log(e),n.forEach(u=>t([...c,u]))},[e]),a.useEffect(()=>{console.log("t"),s(JSON.stringify({name:"log",body:""}))},[]),{readyState:r}},E=({log:e})=>{const s=x.createRef(),r=a.useCallback(()=>{switch(e.level){case"INFO":return"blue";case"WARNING":return"gold";case"ERROR":return"red";case"SUCCESS":return"green";default:return"white"}},[e]);if(!e.msg)return;const c=[{text:e.time,color:"gray"},{text:"["+e.prefix+"]",color:"green"},{text:e.level,color:`${r()}`,className:"font-bold"},...e.msg.split(/\s+/).map(t=>({text:t,color:"white",className:"text-white"}))];return a.useEffect(()=>{s.current&&s.current.scrollIntoView({behavior:"smooth"})},[s]),o.jsx("div",{ref:s,className:"flex flex-wrap gap-1 text-sm font-mono",children:c.map((t,n)=>o.jsx(f,{color:t.color,className:`${t.className} whitespace-nowrap`,children:t.text},n))})},b=()=>{const{logs:e}=l();return N(),o.jsx(p,{returnChildren:!0,children:o.jsx("div",{className:"rounded-lg space-y-3 shadow-md p-4 h-[600px] max-h-[600px] overflow-auto",children:e.map((s,r)=>o.jsx(E,{log:s},r))})})};export{b as default};
